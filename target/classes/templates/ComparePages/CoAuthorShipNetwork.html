
<html>
<head>
    <title>Coauthorship Network</title>
    <script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <script src="../../static/lib/layui-v2.6.3/layui.js" charset="utf-8"></script>
    <script src="../../static/js/lay-config.js?v=1.0.4" charset="utf-8"></script>
    <style type="text/css">

        .top-panel {
            border: 1px solid #eceff9;
            border-radius: 5px;
            text-align: center;
        }
        .top-panel > .layui-card-body{
            height: 40px;
        }
        .top-panel-number{
            line-height:20px;
            font-size: 30px;
        }

        .top-panel-tips{
            border-left:1px solid #eceff9;
            line-height:30px;
            font-size: 12px
        }


        .oy-btn{
            display: inline-block;
            height: 38px;
            line-height: 38px;
            padding: 0 18px;
            background-color: #17bd88;
            color: #fff;
            white-space: nowrap;
            text-align: center;
            font-size: 14px;
            border: none;
            border-radius: 2px;
            cursor: pointer;
        }
        .oy-btn-primary{
            border: 1px solid #C9C9C9;
            background-color: #fff;
            color: #555;
        }

        .father{
            text-align:center;
        }

        .son{
            margin:0 auto;
        }


    </style>
    <link rel="stylesheet" href="../../static/lib/layui-v2.6.3/css/layui.css" media="all">
    <link rel="stylesheet" href="../../static/lib/font-awesome-4.7.0/css/font-awesome.min.css" media="all">
    <link rel="stylesheet" href="../../static/css/public.css" media="all">

</head>

<body>


<div class="layuimini-main">
    <div class="layui-row layui-col-space15">
        <div class="layui-col-md9">
            <div class="layui-row layui-col-space15">
                <div class="layui-col-md18">
                    <div class="layui-card">
                        <div class="layui-card-header"><i class="fa fa-warning icon"></i>Data Set</div>
                        <div class="layui-card-body">
                            <div class="welcome-module">
                                <div class="layui-row layui-col-space10">
                                    <div class="layui-col-xs3">
                                        <div class="panel layui-bg-number">
                                            <div class="panel-body">
                                                <div class="panel-title">
                                                    <span class="label pull-right layui-bg-blue">until 2019</span>
                                                    <h5>Vertices</h5>
                                                </div>
                                                <div class="panel-content">
                                                    <h1 class="no-margins" id="nCount"> </h1>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="layui-col-xs3">
                                        <div class="panel layui-bg-number">
                                            <div class="panel-body">
                                                <div class="panel-title">
                                                    <span class="label pull-right layui-bg-cyan">until 2019</span>
                                                    <h5>Edeges</h5>
                                                </div>
                                                <div class="panel-content">
                                                    <h1 class="no-margins" id="eCount"> </h1>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="layui-col-xs3">
                                        <div class="panel layui-bg-number">
                                            <div class="panel-body">
                                                <div class="panel-title">
                                                    <span class="label pull-right layui-bg-orange">Until 2019</span>
                                                    <h5>Clustering Coefficient</h5>
                                                </div>
                                                <div class="panel-content">
                                                    <h1 class="no-margins" id="ClusteringCoefficient"> </h1>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="layui-col-xs3">
                                        <div class="panel layui-bg-number">
                                            <div class="panel-body">
                                                <div class="panel-title">
                                                    <span class="label pull-right layui-bg-green">Until 2019</span>
                                                    <h5>Maximum Betweeness</h5>
                                                </div>
                                                <div class="panel-content">
                                                    <h1 class="no-margins" id="MaximumBetweeness"> </h1>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="layui-col-xs3">
                                        <div class="panel layui-bg-number">
                                            <div class="panel-body">
                                                <div class="panel-title">
                                                    <span class="label pull-right layui-bg-green">Until 2019</span>
                                                    <h5>Largest Connected Component</h5>
                                                </div>
                                                <div class="panel-content">
                                                    <h1 class="no-margins" id="LargestConnectedComponent"> </h1>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="layui-col-xs3">
                                        <div class="panel layui-bg-number">
                                            <div class="panel-body">
                                                <div class="panel-title">
                                                    <span class="label pull-right layui-bg-green">Until 2019</span>
                                                    <h5>Diameter</h5>
                                                </div>
                                                <div class="panel-content">
                                                    <h1 class="no-margins" id="Diameter"> </h1>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="layui-col-xs3">
                                        <div class="panel layui-bg-number">
                                            <div class="panel-body">
                                                <div class="panel-title">
                                                    <span class="label pull-right layui-bg-green">Until 2019</span>
                                                    <h5>Average Path Length</h5>
                                                </div>
                                                <div class="panel-content">
                                                    <h1 class="no-margins" id="AveragePathLength"> </h1>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-col-md3">
            <div class="layui-col-md12">
                <div class="layui-card">
                    <div class="layui-card-header"><i class="fa fa-credit-card icon icon-blue"></i>Select Two Universities</div>

                    <div style="font-size: 30px; color: #FF0000;padding: 10px;">
                        <i class="layui-icon layui-icon-face-smile" ></i>
                        <div class="layui-inline" style="width: 235px;">
                            <input name="" placeholder="First University"  id="drop1" autocomplete="off" class="layui-input"  style="font-size: 15px;">
                        </div>


                    </div>
                    <div style="font-size: 30px; color: #0000FF;padding: 10px;">
                    <i class="layui-icon layui-icon-face-smile" style="color: #1E9FFF;"></i>
                        <div class="layui-inline" style="width: 235px;">
                            <input name="orgB" placeholder="Second University" id="drop2" autocomplete="off" class="layui-input"  style="font-size: 15px;">
                        </div>


                    </div>

                    <div class="father">
                        <button type="button" class="layui-btn layui-btn-normal layui-btn-radius son" id="button">OK</button>
                    </div>
                </div>

            </div>
        </div>

    </div>
    <div class="layui-row layui-col-space15">
     <div class="layui-col-xs12 layui-col-md9">
         <div class="layui-card">
             <div class="layui-card-header"><i class="fa fa-line-chart icon"></i>Coauthorship Network</div>
         <div id="mynetwork" style="background-color:#ffffff;min-height:900px;padding: 10px"></div>
     </div>
     </div>
        <div class="layui-col-xs12 layui-col-md3">
            <div class="layui-card">
                <div class="layui-card-header"><i class="fa fa-line-chart icon"></i>Coauthor pattern</div>
                <div id="echart" style="background-color:#ffffff;min-height:900px;padding: 10px"></div>
            </div>
        </div>

        </div>
</div>

<script type="text/javascript">

             layui.use(['form', 'upload', 'dropdown','layer','echarts'],function(){
            var form = layui.form;
            var $ = layui.jquery;
            echarts = layui.echarts;

var dropdown1 = layui.dropdown;
var dropdown2 = layui.dropdown;


 dropdown1.render({
    elem: '#drop1'
    ,data: [{
      title: 'Hannover'
      ,id: 101
    },{
      title: 'KIT'
      ,id: 102
    },{
      title: 'RWTH'
      ,id: 103
    },{
      title: 'TUM'
      ,id: 104
    },{
      title: 'Stuttgart'
      ,id: 105
    },{
      title: 'TUBerlin'
      ,id: 106
    },
    {
      title: 'TUBraunschweig'
      ,id: 106
    },
        {
      title: 'TUDarmstadt'
      ,id: 106
    },
        {
      title: 'TUDresden'
      ,id: 106
    },
    ]
    ,click: function(obj){
      this.elem.val(obj.title);
    }
    ,style: 'width: 235px;'
  });


 dropdown2.render({
    elem: '#drop2'
    ,data: [{
      title: 'Hannover'
      ,id: 101
    },{
      title: 'KIT'
      ,id: 102
    },{
      title: 'RWTH'
      ,id: 103
    },{
      title: 'TUM'
      ,id: 104
    },{
      title: 'Stuttgart'
      ,id: 105
    },{
      title: 'TUBerlin'
      ,id: 106
    },
    {
      title: 'TUBraunschweig'
      ,id: 106
    },
        {
      title: 'TUDarmstadt'
      ,id: 106
    },
        {
      title: 'TUDresden'
      ,id: 106
    },
    ]
    ,click: function(obj){
      this.elem.val(obj.title);
    }
    ,style: 'width: 235px;'
  });



console.log("yes");

$(document).on('click',"#button",function(){
    var $ = layui.jquery;
    var f=$("#demo1").val();
    var t=$("#demo2").val();
    console.log(f);
    console.log(t);



    var f=$("#drop1").val();
    var t=$("#drop2").val();
    console.log(f);
    console.log(t);

     $.ajax({
                        url:"/Compare/org",
                        data:{org1:f,org2:t},
                        method:'post',
                        success:function () {
                        console.log("yes");}
            });


       var nodesData = [];
       var edgesData= [];



        $.ajax({
        type:"post",
        url:"/Compare/coAuthorStatistic",
        data:{},
        dataType:"json",
        async:true,
        success: function(result){
        nodesData=result.nodes;
        edgesData=result.edges;
        $("#nCount").html(result.NodesCount);
        $("#eCount").html(result.EdgesCount);
        $("#ClusteringCoefficient").html(result.Clustering);
        $("#MaximumBetweeness").html(result.Maximum);
        $("#LargestConnectedComponent").html(result.Largest);
        $("#AveragePathLength").html(result.Average);
        $("#Diameter").html(result.Diameter);

        console.log(nodesData);


    // 创建节点数据数组
    var nodes = new vis.DataSet(nodesData);

    // 创建边数据数组
    var edges = new vis.DataSet(edgesData);

    // 获取容器
    var container = document.getElementById('mynetwork');

    // 将数据赋值给vis 数据格式化器
    var data = {
        nodes: nodes,
        edges: edges
    };
    var options = {};

    // 初始化关系图
    var network = new vis.Network(container, data, options);

     network.on("click", function (params) {
   if (params.nodes.length === 1) {
     var node = nodes.get(params.nodes[0]);
     if(node.url != null) {
       window.open(node.url, '_blank');
     }
    }
 });
 }
        });



var echarts32 = echarts.init(document.getElementById('echart'), 'walden');

var data=[];
        $.ajax({
        type:"post",
        url:"/Compare/coauthorPattern",
        data:{},
        dataType:"json",
        async:true,
        success: function(result){

        data=result.data;




            var option32 = {
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data:['Coauthored Articles']
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            toolbox: {
                feature: {
                    saveAsImage: {}
                }
            },
            yAxis: {
                type: 'category',
                boundaryGap: false,
                data: ['1960-1970','1970-1980','1980-1990','1990-2000','2000-2005','2005-2010','2010-2013','2013-2016','2016-2019']
            },
            xAxis: {
                type: 'value'
            },
            series: [
                {
                    name:'Coauthored Articles',
                    type:'line',
                    data: data
                }
            ]
        };
        echarts32.setOption(option32);

        window.onresize = function () {
            echarts32.resize();
        }
        }
        });

});
});





</script>



</body>
</html>